<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ROSS.Net: num-init.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>num-init.c File Reference</h1>
<p>
<code>#include &lt;<a class="el" href="save_2num_8h-source.html">num.h</a>&gt;</code><br>

<p>
<a href="save_2num-init_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="save_2num-init_8c.html#c7ba342c0caa5005b7b1bcd26e5fa8dd">init_default_profiles</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="save_2num-init_8c.html#44f4b23c8a4b69be4c4e4d996357cb45">init_profiles_from_file</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="save_2num-init_8c.html#314ee2e90dbbf47ce111dfcb2dedf3a7">num_init_scenario</a> ()</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="c7ba342c0caa5005b7b1bcd26e5fa8dd"></a><!-- doxytag: member="save/num-init.c::init_default_profiles" ref="c7ba342c0caa5005b7b1bcd26e5fa8dd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_default_profiles           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="save_2num-init_8c-source.html#l00004">4</a> of file <a class="el" href="save_2num-init_8c-source.html">save/num-init.c</a>.</p>

<p>References <a class="el" href="num-global_8c-source.html#l00013">g_num_nprofiles</a>, <a class="el" href="num-global_8c-source.html#l00018">g_num_profiles</a>, and <a class="el" href="ospf-global_8c-source.html#l00027">p</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00005"></a>00005 {
<a name="l00006"></a>00006         num_profile     *<a class="code" href="ospf-extern_8h.html#61b0821c8ee2a2df1d8cf38ebe0f2b3c">p</a>;
<a name="l00007"></a>00007 
<a name="l00008"></a>00008         <a class="code" href="num-extern_8h.html#9e104c21d8e193fd08003f2faad61bcc">g_num_nprofiles</a> = 5;
<a name="l00009"></a>00009         <a class="code" href="num-extern_8h.html#efa529eb58f6fe8e51d364c79c97d2f4">g_num_profiles</a> = tw_vector_create(<span class="keyword">sizeof</span>(num_profile), 5);
<a name="l00010"></a>00010 
<a name="l00011"></a>00011         <span class="comment">/*</span>
<a name="l00012"></a>00012 <span class="comment">         * Profile 0 - Home non-worker</span>
<a name="l00013"></a>00013 <span class="comment">         *         1 - Non-financial worker</span>
<a name="l00014"></a>00014 <span class="comment">         *         2 - Financial worker</span>
<a name="l00015"></a>00015 <span class="comment">         *         3 - Child</span>
<a name="l00016"></a>00016 <span class="comment">         *         4 - Firm A worker</span>
<a name="l00017"></a>00017 <span class="comment">         */</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019         p = &amp;<a class="code" href="num-extern_8h.html#efa529eb58f6fe8e51d364c79c97d2f4">g_num_profiles</a>[0];
<a name="l00020"></a>00020         p-&gt;bitrate = 14;
<a name="l00021"></a>00021         p = &amp;<a class="code" href="num-extern_8h.html#efa529eb58f6fe8e51d364c79c97d2f4">g_num_profiles</a>[1];
<a name="l00022"></a>00022         p-&gt;bitrate = 76;
<a name="l00023"></a>00023         p = &amp;<a class="code" href="num-extern_8h.html#efa529eb58f6fe8e51d364c79c97d2f4">g_num_profiles</a>[2];
<a name="l00024"></a>00024         p-&gt;bitrate = 140;
<a name="l00025"></a>00025         p = &amp;<a class="code" href="num-extern_8h.html#efa529eb58f6fe8e51d364c79c97d2f4">g_num_profiles</a>[3];
<a name="l00026"></a>00026         p-&gt;bitrate = 35;
<a name="l00027"></a>00027         p = &amp;<a class="code" href="num-extern_8h.html#efa529eb58f6fe8e51d364c79c97d2f4">g_num_profiles</a>[4];
<a name="l00028"></a>00028         p-&gt;bitrate = 140;
<a name="l00029"></a>00029 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="44f4b23c8a4b69be4c4e4d996357cb45"></a><!-- doxytag: member="save/num-init.c::init_profiles_from_file" ref="44f4b23c8a4b69be4c4e4d996357cb45" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_profiles_from_file           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="save_2num-init_8c-source.html#l00035">35</a> of file <a class="el" href="save_2num-init_8c-source.html">save/num-init.c</a>.</p>

<p>References <a class="el" href="save_2ip-routing_8c-source.html#l00103">f</a>, <a class="el" href="num-global_8c-source.html#l00013">g_num_nprofiles</a>, <a class="el" href="num-global_8c-source.html#l00018">g_num_profiles</a>, <a class="el" href="num-global_8c-source.html#l00019">g_num_profiles_fn</a>, and <a class="el" href="ospf-global_8c-source.html#l00027">p</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00036"></a>00036 {
<a name="l00037"></a>00037         FILE            *<a class="code" href="save_2ip-routing_8c.html#e3285ac7f4cc9a400327c9efb5f535f7">f</a> = NULL;
<a name="l00038"></a>00038 
<a name="l00039"></a>00039         num_profile     *<a class="code" href="ospf-extern_8h.html#61b0821c8ee2a2df1d8cf38ebe0f2b3c">p</a>;
<a name="l00040"></a>00040 
<a name="l00041"></a>00041         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>     i;
<a name="l00042"></a>00042 
<a name="l00043"></a>00043         printf(<span class="stringliteral">"\n\tNetwork User Profiles: \n\n"</span>);
<a name="l00044"></a>00044 
<a name="l00045"></a>00045         <span class="keywordflow">if</span>(NULL == (f = fopen(<a class="code" href="num-extern_8h.html#369d66b80ad9b7b275cc675f7d732d6c">g_num_profiles_fn</a>, <span class="stringliteral">"r"</span>)))
<a name="l00046"></a>00046                 tw_error(TW_LOC, <span class="stringliteral">"Unable to open network user profile file"</span>);
<a name="l00047"></a>00047 
<a name="l00048"></a>00048         fscanf(f, <span class="stringliteral">"%u"</span>, &amp;<a class="code" href="num-extern_8h.html#9e104c21d8e193fd08003f2faad61bcc">g_num_nprofiles</a>);
<a name="l00049"></a>00049 
<a name="l00050"></a>00050         <span class="keywordflow">if</span> (!<a class="code" href="num-extern_8h.html#9e104c21d8e193fd08003f2faad61bcc">g_num_nprofiles</a>)
<a name="l00051"></a>00051                 tw_error(TW_LOC, <span class="stringliteral">"No profiles in %s"</span>, <a class="code" href="num-extern_8h.html#369d66b80ad9b7b275cc675f7d732d6c">g_num_profiles_fn</a>);
<a name="l00052"></a>00052 
<a name="l00053"></a>00053         <a class="code" href="num-extern_8h.html#efa529eb58f6fe8e51d364c79c97d2f4">g_num_profiles</a> = tw_vector_create(<span class="keyword">sizeof</span>(num_profile), <a class="code" href="num-extern_8h.html#9e104c21d8e193fd08003f2faad61bcc">g_num_nprofiles</a>);
<a name="l00054"></a>00054 
<a name="l00055"></a>00055         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="num-extern_8h.html#9e104c21d8e193fd08003f2faad61bcc">g_num_nprofiles</a>; i++)
<a name="l00056"></a>00056         {
<a name="l00057"></a>00057                 p = &amp;<a class="code" href="num-extern_8h.html#efa529eb58f6fe8e51d364c79c97d2f4">g_num_profiles</a>[i];
<a name="l00058"></a>00058 
<a name="l00059"></a>00059                 <span class="keywordflow">if</span> (EOF == fscanf(f, <span class="stringliteral">"%u"</span>, &amp;p-&gt;bitrate))
<a name="l00060"></a>00060                         tw_error(TW_LOC, <span class="stringliteral">"Malformed NUM profile!"</span>);
<a name="l00061"></a>00061 
<a name="l00062"></a>00062                 printf(<span class="stringliteral">"\tType %-45d %11d bps\n"</span>, i, p-&gt;bitrate);
<a name="l00063"></a>00063         }
<a name="l00064"></a>00064 
<a name="l00065"></a>00065         fclose(f);
<a name="l00066"></a>00066 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="314ee2e90dbbf47ce111dfcb2dedf3a7"></a><!-- doxytag: member="save/num-init.c::num_init_scenario" ref="314ee2e90dbbf47ce111dfcb2dedf3a7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void num_init_scenario           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="save_2num-init_8c-source.html#l00073">73</a> of file <a class="el" href="save_2num-init_8c-source.html">save/num-init.c</a>.</p>

<p>References <a class="el" href="num-global_8c-source.html#l00009">g_num_level</a>, <a class="el" href="num-global_8c-source.html#l00026">g_num_log_f</a>, <a class="el" href="num-global_8c-source.html#l00020">g_num_log_fn</a>, <a class="el" href="num-global_8c-source.html#l00008">g_num_mod</a>, <a class="el" href="num-global_8c-source.html#l00011">g_num_net_pop</a>, <a class="el" href="num-global_8c-source.html#l00013">g_num_nprofiles</a>, <a class="el" href="num-global_8c-source.html#l00014">g_num_profile_cnts</a>, <a class="el" href="num-global_8c-source.html#l00019">g_num_profiles_fn</a>, <a class="el" href="num-init_8c-source.html#l00004">init_default_profiles()</a>, <a class="el" href="num-init_8c-source.html#l00035">init_profiles_from_file()</a>, and <a class="el" href="num-types_8h-source.html#l00045">NUM_LEVELS</a>.</p>

<p>Referenced by <a class="el" href="num-main_8c-source.html#l00008">num_main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 {
<a name="l00075"></a>00075         <span class="keywordtype">int</span>              i;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077         <span class="keywordflow">if</span> (0 == strcmp(<a class="code" href="num-extern_8h.html#369d66b80ad9b7b275cc675f7d732d6c">g_num_profiles_fn</a>, <span class="stringliteral">"default"</span>))
<a name="l00078"></a>00078                 <a class="code" href="num-init_8c.html#c7ba342c0caa5005b7b1bcd26e5fa8dd">init_default_profiles</a>();
<a name="l00079"></a>00079         <span class="keywordflow">else</span>
<a name="l00080"></a>00080                 <a class="code" href="num-init_8c.html#44f4b23c8a4b69be4c4e4d996357cb45">init_profiles_from_file</a>();
<a name="l00081"></a>00081 
<a name="l00082"></a>00082         <a class="code" href="num-extern_8h.html#3d5c017aaecb680f2ef496dd21809807">g_num_profile_cnts</a> = tw_vector_create(<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *), <a class="code" href="num-extern_8h.html#9e104c21d8e193fd08003f2faad61bcc">g_num_nprofiles</a>);
<a name="l00083"></a>00083         <a class="code" href="num-extern_8h.html#8e7225b800dfec16d783f08c7235eb20">g_num_net_pop</a> = tw_vector_create(<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *), <a class="code" href="num-extern_8h.html#9e104c21d8e193fd08003f2faad61bcc">g_num_nprofiles</a>);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085         <span class="keywordflow">if</span>(<a class="code" href="num-extern_8h.html#a115cbd69a2ad3ca4db3a630e008f390">g_num_mod</a> &gt;= 0)
<a name="l00086"></a>00086         {
<a name="l00087"></a>00087                 <span class="comment">// log number of network users who achieve each level by type</span>
<a name="l00088"></a>00088                 <a class="code" href="num-extern_8h.html#636d8bb96a30d1213bee9bf248d20b54">g_num_level</a> = tw_vector_create(<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *), <a class="code" href="num-extern_8h.html#9e104c21d8e193fd08003f2faad61bcc">g_num_nprofiles</a>);
<a name="l00089"></a>00089 
<a name="l00090"></a>00090                 <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="num-extern_8h.html#9e104c21d8e193fd08003f2faad61bcc">g_num_nprofiles</a>; i++)
<a name="l00091"></a>00091                         <a class="code" href="num-extern_8h.html#636d8bb96a30d1213bee9bf248d20b54">g_num_level</a>[i] = tw_vector_create( <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>), <a class="code" href="num-types_8h.html#b122432988c73c06becf1ce34077e43b">NUM_LEVELS</a>);
<a name="l00092"></a>00092 
<a name="l00093"></a>00093                 <span class="comment">// open log file for writing</span>
<a name="l00094"></a>00094                 <a class="code" href="num-extern_8h.html#2ea7cd31d72894d5809493ff454b20d6">g_num_log_f</a> = fopen(<a class="code" href="num-extern_8h.html#ce4e049849a3bf0ddb5f87814ab65ed5">g_num_log_fn</a>, <span class="stringliteral">"w"</span>);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096                 <span class="keywordflow">if</span> (!<a class="code" href="num-extern_8h.html#2ea7cd31d72894d5809493ff454b20d6">g_num_log_f</a>)
<a name="l00097"></a>00097                         tw_error(TW_LOC, <span class="stringliteral">"Could not open NUM log file: %s"</span>, <a class="code" href="num-extern_8h.html#ce4e049849a3bf0ddb5f87814ab65ed5">g_num_log_fn</a>);
<a name="l00098"></a>00098         }
<a name="l00099"></a>00099 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jan 27 09:38:29 2009 for ROSS.Net by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
